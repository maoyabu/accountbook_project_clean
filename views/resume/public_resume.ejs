<!DOCTYPE html>
<html lang="ja">
    <head>
    <meta charset="UTF-8">
    <title>履歴書</title>
    <style>
        body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 14px;
        color: #000;
        background-color: #fff;
        padding: 20px;
        }
        .table {
        width: 100%;
        border-collapse: collapse;
        }
        .table td, .table th {
        border: 1px solid #ccc;
        padding: 8px;
        vertical-align: top;
        }
        .table th {
        background-color: #f5f5f5;
        text-align: center;
        }
        .text-center {
        text-align: center;
        }
        .text-end {
        text-align: right;
        }
        .mt-4 {
        margin-top: 1.5rem;
        }
        .mb-4 {
        margin-bottom: 1.5rem;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    </head>
    <body>

    <div class="container mt-4">
        <h2 class="text-center mb-4"> 履歴書</h2>
        <table class="table table-bordered" style="border-collapse: collapse;">
            <tbody>
            <tr>
                <td style="width: 15%;"><strong>氏名</strong></td>
                <td style="width: 35%;"><%= resume?.last_name || '' %> <%= resume?.first_name || '' %></td>
                <td rowspan="4" colspan="2" class="text-center align-middle" style="width: 30%;">
                <% if (resume?.photo_url) { %>
                    <img src="<%= resume.photo_url %>" class="img-fluid" alt="写真" style="max-width: 150px; max-height: 200px;">
                <% } else { %>
                    写真未登録
                <% } %>
                </td>
            </tr>
            <tr>
                <td><strong>ふりがな</strong></td>
                <td><%= resume?.last_name_kana || '' %> <%= resume?.first_name_kana || '' %></td>
            </tr>
            <tr>
                <td><strong>メール</strong></td>
                <td><%= user?.email || '' %></td>
            </tr>
            <tr>
                <td><strong>生年月日・性別</strong></td>
                <td>
                生年月日：<%= user?.birth_date ? user.birth_date.toISOString().substring(0, 10) : '' %><br>
                性別：<%= user?.sex || '' %>
                </td>
            </tr>
            <tr>
                <td><strong>現住所</strong></td>
                <td colspan="3">
                〒<%= resume?.zip || '' %><br>
                <%= resume?.prefecture || '' %><%= resume?.city || '' %><%= resume?.address_detail || '' %>
                </td>
            </tr>
            <tr>
                <td><strong>電話番号</strong></td>
                <td colspan="3">
                自宅: <%= resume?.home_phone || '－' %><br>
                携帯: <%= resume?.mobile_phone || '－' %>
                </td>
            </tr>
            </tbody>
        </table>
        
        <!-- 学歴・職歴 Section -->
        <% if (educationEntries && educationEntries.length > 0) { %>
        <table class="table table-bordered" style="border-collapse: collapse;">
            <thead class="table-dark">
            <tr>
                <th colspan="3" class="text-center">学歴</th>
            </tr>
            </thead>
            <tbody>
            <% educationEntries.forEach(entry => { %>
                <tr>
                <td style="width: 20%;">
                    <%= entry.from_date_str %>〜<%= entry.end_date_str %>
                </td>
                <td style="width: 70%;">
                    <%= entry.school_type %>　<strong><%= entry.school_name %></strong>
                </td>
                <td style="width: 10%;" class="text-center">
                </td>
                </tr>
            <% }) %>
            </tbody>
        </table>
        <% } %>

        <!-- 職歴の表示 -->
        <% if (careerEntries && careerEntries.length > 0) { %>
        <table class="table table-bordered" style="border-collapse: collapse;">
            <thead class="table-dark">
            <tr>
                <th colspan="3" class="text-center">職歴</th>
            </tr>
            </thead>
            <tbody>
            <% careerEntries.forEach(entry => { %>
                <tr>
                <td style="width: 20%;">
                    <%= entry.from_date_str %>〜<%= entry.end_date_str %>
                </td>
                <td style="width: 70%;">
                    <%= entry.company %><br>
                    <%= entry.department %>　<%= entry.position %>
                </td>
                <td style="width: 10%;" class="text-center">
                </td>
                </tr>
            <% }) %>
            </tbody>
        </table>
        <% } %>

        <table>
            <tbody>
            <tr>
                <td colspan="4" style="border: 1px solid #ccc;">
                <div style="background-color: #f0f0f0; text-align: center; font-weight: bold;">自己PR</div>
                <div style="white-space: pre-line;"><%= resume?.self_promotion || '' %></div>
                </td>
            </tr>
            <tr>
                <td colspan="4" style="border: 1px solid #ccc;">
                <div style="background-color: #f0f0f0; text-align: center; font-weight: bold;">資格・特技</div>
                <div style="white-space: pre-line;"><%= resume?.skills || '' %></div>
                </td>
            </tr>
            <tr>
                <td colspan="4" style="border: 1px solid #ccc;">
                <div style="background-color: #f0f0f0; text-align: center; font-weight: bold;">活かせる経験・知識・技術等</div>
                <div style="white-space: pre-line;"><%= resume?.experience || '' %></div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    </body>
</html>
