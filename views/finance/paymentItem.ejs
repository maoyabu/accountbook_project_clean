<% layout('layouts/boilerplate') %>
<div class="text-end mb-2">
  <a href="https://colts-wish-krs.craft.me/UJ4Y7muYdOwQlH/b/1E4B2174-E5D2-44AD-A003-E17BAC4C2917/%E5%AE%B6%E8%A8%88%E7%B0%BF%E3%81%AE%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A"
     target="_blank" rel="noopener"
     class="badge bg-success text-white text-decoration-none p-2">
    ガイド
  </a>
</div>
<div class="container mt-4">
  <h2><i class="fa-regular fa-credit-card"></i> 支払い方法の管理</h2>

  <form action="/finance/payment-items" method="POST">
    <table class="table table-bordered">
      <thead style="background-color: #3a7ca5; color: white;">
        <tr>
          <th>#</th>
          <th>支払い方法名</th>
          <th>表示順</th>
          <th>有効</th>
        </tr>
      </thead>
      <tbody>
        <% paymentItems.forEach((item, idx) => { %>
          <tr>
            <td><%= idx + 1 %></td>
            <td>
              <input type="hidden" name="ids[]" value="<%= item._id %>">
              <input type="text" name="names[]" class="form-control" value="<%= item.paymentItem %>" required>
            </td>
            <td>
              <input type="number" name="orders[]" class="form-control" value="<%= item.display_order %>" required>
            </td>
            <td class="text-center">
              <input type="checkbox" name="lives[]" value="<%= idx %>" <%= item.isLive ? 'checked' : '' %>>
            </td>
          </tr>
        <% }) %>

        <!-- 新規追加欄 -->
        <tr>
          <td>新規</td>
          <td>
            <input type="hidden" name="ids[]" value="">
            <input type="text" name="names[]" class="form-control" placeholder="新しい支払い方法名">
          </td>
          <td>
            <input type="number" name="orders[]" class="form-control" placeholder="順序">
          </td>
          <td class="text-center">
            <input type="checkbox" name="lives[]" value="<%= paymentItems.length %>">
          </td>
        </tr>
      </tbody>
    </table>

    <button type="submit" class="btn btn-primary">保存</button>
  </form>
</div>