<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Bootstrap 5.1 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fullcalendar/bootstrap5@6.1.10/index.global.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/locales/ja.global.min.js"></script>
    <link rel="stylesheet" href="/css/main.css">
    <title>暮しのサポーター</title>
    <link rel="icon" href="/favicon.png" type="image/png">
</head>
<body class="d-flex flex-column vh-100">

<div class="container mt-4">
  <div class="mb-3">
    <form action="/allaboutme/export-diary/one" method="POST">
      <input type="hidden" name="from" value="<%= from %>">
      <input type="hidden" name="to" value="<%= to %>">
      <input type="hidden" name="event" value="<%= event %>">
      <button type="submit" class="btn btn-outline-secondary">1列表示に切り替え</button>
    </form>
  </div>
  <% if (entries && entries.length > 0) { %>
    <% for (let i = 0; i < entries.length; i += 2) { %>
      <div class="row mb-4">
        <% for (let j = 0; j < 2; j++) { 
             const entry = entries[i + j];
             if (entry) { %>
          <div class="col-md-6 mb-3">
            <div class="p-3 border rounded bg-light">
              <div><strong><%= entry.dateStr %></strong></div>
              <div class="text-warning" style="font-size: 1.2rem;">
                <% for (let k = 0; k < 5; k++) { %>
                  <%= k < entry.rating ? '★' : '☆' %>
                <% } %>
              </div>
              <div style="white-space: pre-wrap;" class="mt-2"><%= entry.content %></div>
              <div class="mt-4" style="border-top: 1px dashed #ccc; height: 3em;"></div>
            </div>
          </div>
        <% }} %>
      </div>
    <% } %>
  <% } else { %>
    <p>該当する日記はありません。</p>
  <% } %>
</div>

</body>
</html>